{"version":3,"sources":["webpack:///src/app/login/login.page.html","webpack:///src/app/Entities/Role.ts","webpack:///src/app/login/login-routing.module.ts","webpack:///src/app/login/login.module.ts","webpack:///src/app/login/login.page.scss","webpack:///src/app/login/login.page.ts"],"names":["Role","routes","path","component","LoginPageRoutingModule","imports","forChild","exports","LoginPageModule","declarations","LoginPage","authService","router","userService","afAuth","afs","loadingController","alertController","chatService","deeplink","form","username","password","valid","authenticate","controls","value","subscribe","data","localStorage","setItem","token","details","user","JSON","stringify","email","currentUser","console","log","authorities","includes","Admin","navigate","error","message","fireBaseAuth","signInToFirebase","create","loading","present","signIn","then","res","dismiss","err","buttons","alert","selector","template"],"mappings":"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","file":"login-login-module-es5.js","sourcesContent":["export default \"<ion-header class=\\\"ion-no-border\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      \\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"has-header\\\" overflow-scroll=\\\"false\\\" has-bouncing=\\\"true\\\"  style=\\\"--ion-background-color:#e9e6e6;\\\" >\\n  <h1></h1>\\n    <div id=\\\"header\\\">\\n    <img src=\\\"assets/images/bertsch.png\\\" />\\n    <ion-row>\\n    <h1 style=\\\"color: white;\\\" >Bertsch&nbsp;</h1><h1 style=\\\"color: #f56d1f;\\\">Innov</h1><h1 style=\\\"color: white;\\\" >ation</h1>\\n  </ion-row>\\n  </div>\\n\\n  <form id=\\\"form\\\" role=\\\"form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n    <ion-input style=\\\"font-family: Roboto;\\\" ng-model=\\\"name\\\" formControlName=\\\"username\\\" placeholder=\\\"Username\\\" class=\\\"input-underline\\\" color=\\\"none\\\"></ion-input>\\n    <ion-input style=\\\"font-family: Roboto;\\\" formControlName=\\\"password\\\" placeholder=\\\"Password\\\" type =\\\"password\\\" class=\\\"input-underline\\\"></ion-input>\\n    <ion-button style=\\\"text-transform: lowercase; text-transform: capitalize;font-family: Roboto;\\\" expand=\\\"block\\\" shape=\\\"round\\\" color=\\\"none\\\" class=\\\"ion-btn\\\" type=\\\"submit\\\">Login</ion-button>\\n    <ion-button style=\\\"text-transform: lowercase; text-transform: capitalize;font-family: Roboto;\\\" routerLink=\\\"/signup\\\" expand=\\\"block\\\" shape=\\\"round\\\" color=\\\"primary\\\" class=\\\"ion-btn\\\" >Sign Up</ion-button>\\n  </form>\\n</ion-content>\\n\";","export enum Role {\r\n    User = 'ROLE_USER',\r\n    Admin = 'ROLE_ADMIN'\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule,\n    FormsModule, \n    ReactiveFormsModule,\n  ],\n  declarations: [LoginPage],\n})\nexport class LoginPageModule {}\n","export default \"ion-toolbar {\\n  --background: #222;\\n}\\nion-toolbar ion-button {\\n  text-transform: initial;\\n  font-size: 17px;\\n}\\n.background-shape {\\n  border-radius: 20px;\\n}\\n.input-lg {\\n  height: 46px;\\n  padding: 10px 16px;\\n  font-size: 18px;\\n  line-height: 1.3333333;\\n  border-radius: 0;\\n}\\n.input-underline {\\n  margin-top: 20px;\\n  background: 0 0;\\n  border: none;\\n  box-shadow: none;\\n  border-bottom: 2px solid rgba(255, 255, 255, 0.5);\\n  color: #fff;\\n  border-radius: 0;\\n  -webkit-text-emphasis-color: #fff;\\n          text-emphasis-color: #fff;\\n  font-style: #fff;\\n}\\n.ion-btn {\\n  margin-top: 15px;\\n  height: 48px;\\n  font-size: 18px;\\n  border-radius: 50px;\\n  background: #222;\\n  border: 2px solid rgba(255, 255, 255, 0.8);\\n  font-size: 18px;\\n  font-family: Arial, Helvetica, sans-serif;\\n  line-height: 20px;\\n}\\n.ion-btn:hover,\\n.ion-btn:focus,\\n.ion-btn:active,\\n.ion-btn:visited {\\n  color: white;\\n  border: 2px solid white;\\n  outline: none;\\n}\\nion-content {\\n  --background: #222;\\n}\\nion-content #header {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n}\\nion-content #header h1 {\\n  font-weight: 700;\\n  font-size: 26px;\\n  color: #010100;\\n}\\nion-content #header img {\\n  width: 100px;\\n  height: 100px;\\n  border-radius: 50%;\\n  border: 2px solid #ff3c00;\\n}\\nion-content #form {\\n  margin-top: 10%;\\n  padding-left: 30px;\\n  padding-right: 30px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbG9naW4vbG9naW4ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUlBO0VBQ0Usa0JBQUE7QUFIRjtBQUtFO0VBQ0UsdUJBQUE7RUFDQSxlQUFBO0FBSEo7QUFPQTtFQUVFLG1CQUFBO0FBTEY7QUFRQTtFQUNFLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGVBQUE7RUFDQSxzQkFBQTtFQUNBLGdCQUFBO0FBTEY7QUFRQTtFQUNFLGdCQUFBO0VBQ0EsZUFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtFQUNBLGlEQUFBO0VBQ0EsV0FBQTtFQUNBLGdCQUFBO0VBQ0EsaUNBQUE7VUFBQSx5QkFBQTtFQUNBLGdCQUFBO0FBTEY7QUFPQTtFQUVFLGdCQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7RUFFQSxtQkFBQTtFQUNBLGdCQTVDd0I7RUE2Q3hCLDBDQUFBO0VBQ0EsZUFBQTtFQUNBLHlDQUFBO0VBQ0EsaUJBQUE7QUFMRjtBQU9BOzs7O0VBSUUsWUFBQTtFQUNBLHVCQUFBO0VBQ0EsYUFBQTtBQUpGO0FBTUE7RUFDRSxrQkFBQTtBQUhGO0FBS0U7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxtQkFBQTtBQUhKO0FBS0k7RUFDRSxnQkFBQTtFQUNBLGVBQUE7RUFDQSxjQUFBO0FBSE47QUFNSTtFQUNFLFlBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSx5QkFBQTtBQUpOO0FBUUU7RUFDRSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxtQkFBQTtBQU5KIiwiZmlsZSI6InNyYy9hcHAvbG9naW4vbG9naW4ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiJHRvcG5hdi1iYWNrZ3JvdW5kLWNvbG9yOiAjMjIyO1xuXG5cblxuaW9uLXRvb2xiYXIge1xuICAtLWJhY2tncm91bmQ6ICMyMjI7XG5cbiAgaW9uLWJ1dHRvbiB7XG4gICAgdGV4dC10cmFuc2Zvcm06IGluaXRpYWw7XG4gICAgZm9udC1zaXplOiAxN3B4O1xuICB9XG59XG5cbi5iYWNrZ3JvdW5kLXNoYXBle1xuICBcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcbn1cblxuLmlucHV0LWxnIHtcbiAgaGVpZ2h0OiA0NnB4O1xuICBwYWRkaW5nOiAxMHB4IDE2cHg7XG4gIGZvbnQtc2l6ZTogMThweDtcbiAgbGluZS1oZWlnaHQ6IDEuMzMzMzMzMztcbiAgYm9yZGVyLXJhZGl1czogMDtcbn1cblxuLmlucHV0LXVuZGVybGluZSB7XG4gIG1hcmdpbi10b3A6IDIwcHg7XG4gIGJhY2tncm91bmQ6IDAgMDtcbiAgYm9yZGVyOiBub25lO1xuICBib3gtc2hhZG93OiBub25lO1xuICBib3JkZXItYm90dG9tOiAycHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpO1xuICBjb2xvcjogI2ZmZjtcbiAgYm9yZGVyLXJhZGl1czogMDtcbiAgdGV4dC1lbXBoYXNpcy1jb2xvcjogI2ZmZjtcbiAgZm9udC1zdHlsZTogI2ZmZjtcbn1cbi5pb24tYnRuIHtcbiAgXG4gIG1hcmdpbi10b3A6IDE1cHg7XG4gIGhlaWdodDogNDhweDtcbiAgZm9udC1zaXplOiAxOHB4O1xuICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDUwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDUwcHg7XG4gIGJhY2tncm91bmQ6ICR0b3BuYXYtYmFja2dyb3VuZC1jb2xvcjtcbiAgYm9yZGVyOiAycHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpO1xuICBmb250LXNpemU6IDE4cHg7XG4gIGZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO1xuICBsaW5lLWhlaWdodDogMjBweDtcbn1cbi5pb24tYnRuOmhvdmVyLFxuLmlvbi1idG46Zm9jdXMsXG4uaW9uLWJ0bjphY3RpdmUsXG4uaW9uLWJ0bjp2aXNpdGVkIHtcbiAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMSk7XG4gIGJvcmRlcjogMnB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMSk7XG4gIG91dGxpbmU6IG5vbmU7XG59XG5pb24tY29udGVudCB7XG4gIC0tYmFja2dyb3VuZDogIzIyMjtcblxuICAjaGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAgIGgxIHtcbiAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gICAgICBmb250LXNpemU6IDI2cHg7XG4gICAgICBjb2xvcjogIzAxMDEwMDtcbiAgICB9XG5cbiAgICBpbWcge1xuICAgICAgd2lkdGg6IDEwMHB4O1xuICAgICAgaGVpZ2h0OiAxMDBweDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgIGJvcmRlcjogMnB4IHNvbGlkI2ZmM2MwMDtcbiAgICB9XG4gIH1cblxuICAjZm9ybSB7XG4gICAgbWFyZ2luLXRvcDogMTAlO1xuICAgIHBhZGRpbmctbGVmdDogMzBweDtcbiAgICBwYWRkaW5nLXJpZ2h0OiAzMHB4O1xuICBcbiAgfVxufVxuXG4iXX0= */\";","import { Component, Input, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthenticationService } from '../Services/authentication.service';\nimport { UserService } from '../Services/user.service';\nimport { AppSettings } from '../Settings/AppSettings';\nimport { FormGroup, FormControl } from '@angular/forms';\nimport { Role } from '../Entities/Role';\nimport { Injectable } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport * as firebase from 'firebase/app'\nimport { Observable } from 'rxjs';\nimport { switchMap, map } from 'rxjs/operators';\nimport { AlertController, LoadingController } from '@ionic/angular';\nimport { ChatService } from '../Services/chat.service';\nimport {Deeplinks} from '@ionic-native/deeplinks/ngx'\n\n\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  email:any;\n  error: any ;\n  @Input() currentUser:any\n\n  constructor(private authService: AuthenticationService,\n              private router: Router,\n              private userService: UserService,\n              private afAuth: AngularFireAuth,\n              private afs:AngularFirestore,\n              private loadingController: LoadingController,\n              private alertController: AlertController,\n              private chatService: ChatService,\n              private deeplink:Deeplinks\n              ) { }\n  \n  form: FormGroup = new FormGroup({\n    username: new FormControl(''),\n    password: new FormControl(''),\n  });\n  \n  ngOnInit() {\n  }\n  \n  async onSubmit() {\n    if (this.form.valid) {\n    \n      this.authService.authenticate(this.form.controls.username.value, this.form.controls.password.value).subscribe(data => {\n        localStorage.setItem('token', data.token) ;\n        this.userService.details(this.form.controls.username.value).subscribe(user => {\n          localStorage.setItem('user', JSON.stringify(user)) ;\n          AppSettings.details = user ;\n          this.email = AppSettings.details.email\n          this.currentUser = AppSettings.details\n          console.log(this.currentUser)\n            if (AppSettings.details.authorities.includes(Role.Admin)) {\n              console.log('admin connected') ;\n              this.router.navigate(['/options/home/dashboard']) ;\n            } else {\n              console.log('user connected') ;\n              console.log('connected user email'+this.email)\n              this.router.navigate(['/options/profile']) ;\n            }\n          }\n        \n        ) ;\n        },\n        error => {\n          this.error = error.message;\n        } );\n      }\n      this.authService.fireBaseAuth();\n      this.signInToFirebase();\n  }\n\n  async signInToFirebase(){\n    const loading = await this.loadingController.create();\n    await loading.present();\n    console.log('firebaseEmail'+this.email)\n    this.chatService\n      .signIn(this.email,this.form.controls.password.value)\n      .then(\n        (res) => {\n          loading.dismiss();\n        },\n        async (err) => {\n          loading.dismiss();\n          const alert = await this.alertController.create({\n            message: \"Invalid Username or password\",\n            buttons: ['OK'],\n          });\n \n          await alert.present();\n        }\n      );\n  }\n\n  \n}\n"]}